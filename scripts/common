# common utility functions

export HOMEBREW_CASK_OPTS="--appdir=/Applications"

load_nvm() {
  export NVM_DIR="${HOME}/.nvm"
  [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"  # This loads nvm
}

brew_install() {
  # Usage: brew_install pkg [cmd]
  #
  # cmd is the command to test if the pkg is already installed.
  # cmd defaults to pkg if not supplied.

  pkg=$1
  cmd=${2-$pkg}

  cd $DOTFILES_ROOT

  if test ! $(which $cmd)
  then
    echo "II Installing $pkg"
    brew install $pkg
  fi

  cd - > /dev/null
}

cask_install() {
  pkg=$1
  if ! $(brew cask list | grep -q $pkg)
  then
    brew cask install $pkg
  fi
}
